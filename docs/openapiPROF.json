{
  "openapi": "3.0.1",
  "info": {
    "title": "AuleWebREST STDT-Sviluppo Web Avanzato a.a. 2022/2023",
    "contact": {
      "email": "mattia.peccerillo@student.univaq.it"
    },
    "version": "1.0"
  },
  "servers": [
    {
      "url": "http://localhost:8080/aulewebREST_STDT"
    }
  ],
  "paths": {
    "/rest/aule": {
      "post": {
        "operationId": "addAula",
        "tags": [
          "Aula"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Aula"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "created",
            "headers": {
              "location": {
                "schema": {
                  "type": "string",
                  "format": "uri"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "format": "uri"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/GeneralError"
          }
        }
      }
    },
    "/rest/aule/{id}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/ID"
        }
      ],
      "get": {
        "operationId": "getAula",
        "tags": [
          "Aula"
        ],
        "responses": {
          "200": {
            "description": "un aula",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Aula"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/GeneralError"
          }
        }
      },
      "put": {
        "operationId": "updateAula",
        "tags": [
          "Aula"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Aula"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "no content"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/GeneralError"
          }
        }
      },
      "delete": {
        "operationId": "deleteAula",
        "tags": [
          "Aula"
        ],
        "responses": {
          "204": {
            "description": "no content"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/GeneralError"
          }
        }
      }
    },
    "/rest/fatture/{anno}/{numero}/attachment": {
      "get": {
        "operationId": "getAttachment",
        "tags": [
          "item fattura"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/annoFatture"
          },
          {
            "$ref": "#/components/parameters/numeroFattura"
          }
        ],
        "responses": {
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/GeneralError"
          },
          "default": {
            "description": "fattura in PDF",
            "content": {
              "application/pdf": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          }
        }
      }
    },
    "/rest/fatture/{anno}/{numero}/pIVA": {
      "get": {
        "operationId": "getPIvaFattura",
        "tags": [
          "item fattura"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/annoFatture"
          },
          {
            "$ref": "#/components/parameters/numeroFattura"
          }
        ],
        "responses": {
          "200": {
            "description": "partita IVA fattura",
            "content": {
              "application/json": {
                "schema": {
                  "type": "integer",
                  "format": "int32"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/GeneralError"
          }
        }
      }
    },
    "/rest/fatture/{anno}/{numero}/elementi": {
      "get": {
        "operationId": "getElementiFattura",
        "tags": [
          "item fattura",
          "collezione elementi fattura"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/annoFatture"
          },
          {
            "$ref": "#/components/parameters/numeroFattura"
          }
        ],
        "responses": {
          "200": {
            "description": "lista elementi fattura",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Elemento"
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/GeneralError"
          }
        }
      }
    },
    "/rest/fatture/{anno}/{numero}/elementi/{riga}": {
      "get": {
        "operationId": "getElementoFattura",
        "tags": [
          "item fattura",
          "collezione elementi fattura"
        ],
        "parameters": [
          {
            "name": "riga",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "$ref": "#/components/parameters/annoFatture"
          },
          {
            "$ref": "#/components/parameters/numeroFattura"
          }
        ],
        "responses": {
          "200": {
            "description": "dettaglio elemento fattura",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Elemento"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/GeneralError"
          }
        }
      }
    },
    "/rest/fatture/{anno}": {
      "get": {
        "operationId": "getFattureAnno",
        "tags": [
          "collezione fatture"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/annoFatture"
          },
          {
            "$ref": "#/components/parameters/pagerFrom"
          },
          {
            "$ref": "#/components/parameters/pagerTo"
          }
        ],
        "responses": {
          "200": {
            "description": "lista fatture per anno",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListaFattureMinimale"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "500": {
            "$ref": "#/components/responses/GeneralError"
          }
        }
      }
    },
    "/rest/fatture/count": {
      "get": {
        "operationId": "getNumeroFatture",
        "tags": [
          "collezione fatture"
        ],
        "parameters": [
          {
            "name": "pIVA",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "conteggio fatture",
            "content": {
              "application/json": {
                "schema": {
                  "type": "integer",
                  "format": "int32"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/GeneralError"
          }
        }
      }
    },
    "/rest/auth/login": {
      "post": {
        "operationId": "doLogin",
        "tags": [
          "autenticazione"
        ],
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "type": "object",
                "properties": {
                  "username": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "successful login",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "headers": {
              "Authorization": {
                "schema": {
                  "type": "string",
                  "pattern": "Bearer [a-z0-9A-Z-]+"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "500": {
            "$ref": "#/components/responses/GeneralError"
          }
        }
      }
    },
    "/rest/auth/logout": {
      "delete": {
        "operationId": "doLogout",
        "tags": [
          "autenticazione"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "successful logout"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "500": {
            "$ref": "#/components/responses/GeneralError"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "internalToken"
      }
    },
    "responses": {
      "GeneralError": {
        "description": "errore generale",
        "content": {
          "text/plain": {
            "schema": {
              "type": "string",
              "example": "Messaggio di Errore"
            }
          }
        }
      },
      "UnauthorizedError": {
        "description": "bearer token mancante o non valido"
      },
      "NotFound": {
        "description": "elemento non trovato",
        "content": {
          "text/plain": {
            "schema": {
              "type": "string",
              "example": "Elemento inesistente"
            }
          }
        }
      }
    },
    "parameters": {
      "ID": {
        "name": "id",
        "in": "path",
        "required": true,
        "schema": {
          "type": "integer",
          "format": "int32"
        }
      },
      "pagerFrom": {
        "name": "from",
        "in": "query",
        "required": false,
        "schema": {
          "type": "integer",
          "format": "int32",
          "minimum": 0,
          "default": 0
        }
      },
      "pagerTo": {
        "name": "to",
        "in": "query",
        "required": false,
        "schema": {
          "type": "integer",
          "format": "int32",
          "minimum": 0
        }
      },
      "annoFatture": {
        "name": "anno",
        "in": "path",
        "required": true,
        "schema": {
          "type": "integer",
          "format": "int32"
        }
      },
      "numeroFattura": {
        "name": "numero",
        "in": "path",
        "required": true,
        "schema": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "schemas": {
      "Gruppo": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string"
          },
          "descrizione": {
            "type": "string"
          }
        }
      },
      "Posizione": {
        "type": "object",
        "properties": {
          "luogo": {
            "type": "string"
          },
          "edificio": {
            "type": "string"
          },
          "piano": {
            "type": "string"
          }
        }
      },
      "Aula": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string"
          },
          "capienza": {
            "type": "integer",
            "format": "int32"
          },
          "emailResponsabile": {
            "type": "string"
          },
          "note": {
            "type": "string"
          },
          "numeroPreseRete": {
            "type": "integer",
            "format": "int32"
          },
          "numeroPreseElettriche": {
            "type": "integer",
            "format": "int32"
          },
          "gruppo": {
            "$ref": "#/components/schemas/Gruppo"
          },
          "posizione": {
            "$ref": "#/components/schemas/Posizione"
          }
        }
      },
      "Attrezzatura": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string"
          }
        }
      },
      "Responsabile": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string"
          },
          "email": {
            "type": "string"
          }
        }
      },
      "Amministratore": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string"
          },
          "password": {
            "type": "string"
          }
        }
      },
      "Corso": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string"
          }
        }
      },
      "Evento": {
        "type": "object",
        "properties": {
          "giorno": {
            "type": "string",
            "format": "date"
          },
          "oraInizio": {
            "type": "string",
            "format": "time"
          },
          "oraFine": {
            "type": "string",
            "format": "time"
          },
          "nome": {
            "type": "string"
          },
          "descrizione": {
            "type": "string"
          },
          "tipologia": {
            "type": "string"
          },
          "responsabile": {
            "$ref": "#/components/schemas/Responsabile"
          },
          "aula": {
            "$ref": "#/components/schemas/Aula"
          },
          "corso": {
            "$ref": "#/components/schemas/Corso"
          }
        }
      }
    }
  }
}